<html>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@8"></script>
<script
        src="https://code.jquery.com/jquery-3.4.1.min.js"
        integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
        crossorigin="anonymous">
    </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

<head>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <title>The Ultimate Guide of the World</title>
  <link rel="stylesheet" href="/stylesheets/style.css">
</head>

<body>
  <form id="form-login">
    <div class="col-md-4">
    <div class="card">
        <div class="card-header"><br>
            <h2 class="card-title text-center">Crear usuario</h2>
        </div>
      <div class="list-group-item">
        <h7 class="">E-mail</h7>
        <input type="email" name="email" id="email" class="input form-control col-md-8 ">
      </div>

      <div class="list-group-item">
        <h7 class="">Nombre</h7>
        <input type="text" name="nombre" id="nombre" class="input form-control col-md-8 ">
      </div>

      <div class="list-group-item">
        <h7 class="">Contrase√±a</h7>
        <input type="password" name="contrasena" id="contrasena" class="input form-control col-md-8 ">
      </div>

      <div class="list-group-item">
          <h7 class="">Administrador</h7>
          <input type="checkbox" style="position: absolute; left:120px; top: 15px">
      </div>


        <input type="submit" value="Enviar" class="btn btn-success" style="margin: 10px; position: relative; top: 5px">
        <input type="reset" value="Restablecer" class="btn btn-primary" style="margin: 10px; position: relative; top: -5px;">
    </div>
  </div>
  </form>

  <form id="delete-login">
  <div class="eliminar col-md-4">
  <div class="card">
      <div class="card-header"><br>
        <h2 class="card-title text-center">Eliminar Usuario</h2>
    </div>
    <div class="list-group-item">
        <h7 class="">Eliminar por id</h7>
        <input type="text" name="delete" id="id_usuario" class="input form-control col-md-8" style="left: 120px">
      </div>
      <input type="submit" value="Delete" onclick="delete_login()" class="btn btn-danger" style="margin: 10px;">
    </div>
  </div>
</form>
</body>
<!--LOGIN/DELETE
 <script>
$("#delete-login").submit(function(event){
   console.log("eliminando");
   event.preventDefault();

   $.ajax({
     url: 'http://localhost:3000/usuario/'+ $("#borrar_usuario").val(),
     beforeSend: function (){
       console.log("procesando");
     },
     success: function (response) {
       console.log("Tarea completada");
       const swalWithBootstrapButtons = Swal.mixin({
  customClass: {
    confirmButton: 'btn btn-success',
    cancelButton: 'btn btn-danger'
  },
  buttonsStyling: false
})

swalWithBootstrapButtons.fire({
  title: 'Are you sure?',
  text: "You won't be able to revert this!",
  type: 'warning',
  showCancelButton: true,
  confirmButtonText: 'Yes, delete it!',
  cancelButtonText: 'No, cancel!',
  reverseButtons: true
}).then((result) => {
  if (result.value) {
    swalWithBootstrapButtons.fire(
      'Deleted!',
      'Your file has been deleted.',
      'success'
    )
  } else if (
    /* Read more about handling dismissals below */
    result.dismiss === Swal.DismissReason.cancel
  ) {
    swalWithBootstrapButtons.fire(
      'Cancelled',
      'Your imaginary file is safe :)',
      'error'
    )
  }
})

     }
   })
 })

 $("#form-login").submit(function(event){
    console.log("creando");
    event.preventDefault();

    $.ajax({
      url: 'http://localhost:3000/usuario/'+ $("#crear_usuario").val(),
      beforeSend: function (){
        console.log("procesando");
      },
      success: function (response) {
        console.log("Tarea completada");
        Swal.fire(
          'Se creo con exito',
          response,
          'success'
          );
      }
    });
  });
-->

<!--CODIGO SIMPLE-->
<script>
$("#form-login").submit(function(event){
  console.log("creando");
  event.preventDefault();
  $.ajax({
    url: "http://localhost:3000/usuario",
    type: "POST",
    data: { nombre: $("#nombre").val(),
            email: $("#email").val(),
            contrasena: $("#contrasena").val()},
    success: function (response){
      console.log(response);

      Swal.fire(
          'Se creo con exito',
          '',
          'success'
          );
    }
  })})
  /*
  $.post("http://localhost:3000/usuario",
      {
        nombre: $("#nombre").val(),
        email: $("#email").val(),
        contrasena: $("#contrasena").val()
      });
});
*/
function delete_login(){
    console.log("eliminando");
    event.preventDefault();

    $.ajax({
      url: 'http://localhost:3000/usuario/'+ $("#id_usuario").val(),
      type: 'DELETE',
      beforeSend: function (){
        console.log("procesando");
      },
      success: function (response) {
        console.log(response);
        Swal.fire(
          'Se Elimino con exito',
          '',
          'success'
          );
      }
    });
  };
 </script>
</html>
